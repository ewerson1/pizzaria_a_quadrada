"use strict";(self["webpackChunkpizzaria_a_quadrada"]=self["webpackChunkpizzaria_a_quadrada"]||[]).push([[263],{2359:function(a,t,s){s.r(t),s.d(t,{default:function(){return P}});var i=s(6768);const e={class:"main-container"},n=(0,i.Lk)("h1",null,"Gerenciar pedidos:",-1);function d(a,t,s,d,o,l){const u=(0,i.g2)("Dashboard");return(0,i.uX)(),(0,i.CE)("div",e,[n,(0,i.bF)(u)])}var o=s(5130),l=s(4232);const u=a=>((0,i.Qi)("data-v-2d04454a"),a=a(),(0,i.jt)(),a),c={id:"pizza-table"},r=u((()=>(0,i.Lk)("div",null,[(0,i.Lk)("div",{id:"pizza-table-heading"},[(0,i.Lk)("div",{id:"order-id"},"#:"),(0,i.Lk)("div",null,"Cliente:"),(0,i.Lk)("div",null,"Massa:"),(0,i.Lk)("div",null,"Sabor:"),(0,i.Lk)("div",null,"Opcionais:"),(0,i.Lk)("div",null,"Ações:")])],-1))),p={id:"pizza-table-rows"},h={class:"order-number"},v=["onChange"],z=["value","selected"],k=["onClick"];function m(a,t,s,e,n,d){const u=(0,i.g2)("Message");return(0,i.uX)(),(0,i.CE)("div",c,[(0,i.bo)((0,i.bF)(u,{msg:n.msg},null,8,["msg"]),[[o.aG,n.msg]]),r,(0,i.Lk)("div",p,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(n.pizzas,(a=>((0,i.uX)(),(0,i.CE)("div",{class:"pizza-table-row",key:a.id},[(0,i.Lk)("div",h,(0,l.v_)(a.id),1),(0,i.Lk)("div",null,(0,l.v_)(a.nome),1),(0,i.Lk)("div",null,(0,l.v_)(a.massas),1),(0,i.Lk)("div",null,(0,l.v_)(a.sabores),1),(0,i.Lk)("div",null,[(0,i.Lk)("ul",null,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(a.opcionais,((a,t)=>((0,i.uX)(),(0,i.CE)("li",{key:t},(0,l.v_)(a),1)))),128))])]),(0,i.Lk)("div",null,[(0,i.Lk)("select",{name:"status",class:"status",onChange:t=>d.updatePizza(t,a.id)},[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(n.status,(t=>((0,i.uX)(),(0,i.CE)("option",{key:t.id,value:t.tipo,selected:a.status==t.tipo},(0,l.v_)(t.tipo),9,z)))),128))],40,v),(0,i.Lk)("button",{class:"delete-btn",onClick:t=>d.deletePizza(a.id)},"Cancelar",8,k)])])))),128))])])}var g=s(400),L={name:"Dashboard",data(){return{pizzas:null,pizzas_id:null,status:[],msg:null}},components:{Message:g.A},methods:{async getPedidos(){const a=await fetch("http://localhost:3000/pizzas"),t=await a.json();this.pizzas=t,this.getStatus()},async getStatus(){const a=await fetch("http://localhost:3000/status"),t=await a.json();this.status=t},async deletePizza(a){const t=await fetch(`http://localhost:3000/pizzas/${a}`,{method:"DELETE"}),s=await t.json();this.msg=`Pedido Nº ${s.id} removido com sucesso ✅`,setTimeout((()=>this.msg=""),3e3),this.getPedidos()},async updatePizza(a,t){const s=a.target.value,i=JSON.stringify({status:s}),e=await fetch(`http://localhost:3000/pizzas/${t}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:i}),n=await e.json();this.msg=`Pedido Nº ${n.id} atualizado para ${n.status} `,setTimeout((()=>this.msg=""),3e3),this.getPedidos(),console.log(n)}},mounted(){this.getPedidos()}},b=s(1241);const C=(0,b.A)(L,[["render",m],["__scopeId","data-v-2d04454a"]]);var _=C,f={name:"Pedidos",components:{Dashboard:_}};const w=(0,b.A)(f,[["render",d]]);var P=w}}]);
//# sourceMappingURL=pedidos.16886814.js.map